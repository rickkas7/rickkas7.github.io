<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MCP23008-RK: MCP23008-RK</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MCP23008-RK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">MCP23008-RK </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><em>Particle driver for <a class="el" href="class_m_c_p23008.html" title="Class for the MCP23008 I2C GPIO chip.">MCP23008</a> 8-port I2C GPIO expander</em></p>
<h1>Pinouts</h1>
<p>One Side:</p>
<ul>
<li>1 SCL (to Photon D1, blue)</li>
<li>2 SDA (to Photon D0, green)</li>
<li>3 A2</li>
<li>4 A1</li>
<li>5 A0</li>
<li>6 /RESET</li>
<li>7 NC</li>
<li>8 INT (output)</li>
<li>9 VSS (GND, black)</li>
</ul>
<p>Other Side:</p>
<ul>
<li>10 GP0</li>
<li>11 GP1</li>
<li>12 GP2</li>
<li>13 GP3</li>
<li>14 GP4</li>
<li>15 GP5</li>
<li>16 GP6</li>
<li>17 GP7</li>
<li>18 VDD (3.3 or 5V, red)</li>
</ul>
<p>Note that the address lines are not biased so you must connect them to GND or VDD to set the address! Normally you'd connect all to GND to set address 0.</p>
<p>Same for /RESET, though you probably want to connect that to VDD to keep the device out of reset.</p>
<p>Here's my test circuit:</p>
<div class="image">
<img src="circuit.jpg" alt=""/>
<div class="caption">
circuit</div></div>
   <p>Important: Remember the pull-ups on the SDA and SCL lines (4.7K or 10K typically)! While many breakout boards like you'd get from Adafruit or Sparkfun includes the pull-ups on the board, you must add external resistors when using a bare <a class="el" href="class_m_c_p23008.html" title="Class for the MCP23008 I2C GPIO chip.">MCP23008</a>.</p>
<h1>Using the Library</h1>
<p>This library has an API that looks remarkably like the regular GPIO calls.</p>
<h2>Initialization</h2>
<p>Typically you create an global object like this in your source:</p>
<div class="fragment"><div class="line">MCP23008 gpio(Wire, 0);</div>
</div><!-- fragment --><p>The first parameter is the interface. It's typically Wire (D0 and D1).</p>
<p>The second parameter is the address of the device (0-7). This corresponds to the value set on the A0, A1, and A2 pins and allows up to 8 separate <a class="el" href="class_m_c_p23008.html" title="Class for the MCP23008 I2C GPIO chip.">MCP23008</a> devices on a single I2C bus.</p>
<p>On the Electron, you can also use Wire1 on C4 and C5:</p>
<div class="fragment"><div class="line">MCP23008 gpio(Wire1, 0);</div>
</div><!-- fragment --><h2>begin</h2>
<div class="fragment"><div class="line">void begin();</div>
</div><!-- fragment --><p>You must call begin(), typically during setup(), to initialize the Wire interface.</p>
<h2>pinMode</h2>
<div class="fragment"><div class="line">void pinMode(uint16_t pin, PinMode mode);</div>
</div><!-- fragment --><p>Sets the pin mode of a pin (0-7). Values for mode include:</p>
<ul>
<li>INPUT (default)</li>
<li>INPUT_PULLUP</li>
<li>OUTPUT</li>
</ul>
<p>Note that it does not support INPUT_PULLDOWN, as the <a class="el" href="class_m_c_p23008.html" title="Class for the MCP23008 I2C GPIO chip.">MCP23008</a> only supports internal pull-ups. Also, they're 100K vs. the 40K (-ish) pull-ups in the STM32F205.</p>
<h2>digitalWrite</h2>
<div class="fragment"><div class="line">void digitalWrite(uint16_t pin, uint8_t value);</div>
</div><!-- fragment --><p>Sets the value of a pin (0-7) to the specified value. Values are typically:</p>
<ul>
<li>0 (or false or LOW)</li>
<li>1 (or true or HIGH)</li>
</ul>
<h2>digitalRead</h2>
<div class="fragment"><div class="line">int32_t digitalRead(uint16_t pin);</div>
</div><!-- fragment --><p>Reads the value of the pin (0-7). This will be HIGH (true, 1) or LOW (false, 0).</p>
<p>If used on an output pin, returns the current output state.</p>
<h2>getPinMode</h2>
<div class="fragment"><div class="line">PinMode getPinMode(uint16_t pin);</div>
</div><!-- fragment --><p>Returns the pin mode of pin (0-7), which will be one of:</p>
<ul>
<li>INPUT (default)</li>
<li>INPUT_PULLUP</li>
<li>OUTPUT</li>
</ul>
<h2>pinAvailable</h2>
<div class="fragment"><div class="line">bool pinAvailable(uint16_t pin);</div>
</div><!-- fragment --><p>Returns true if 0 &lt;= pin &lt;= 7.</p>
<h2>More Functions</h2>
<p>The full documentation is available in the docs/index.html file or in the [browsable API reference](). This documentation is generated automatically from comments in <a class="el" href="_m_c_p23008-_r_k_8h_source.html">MCP23008-RK.h</a> using the Doxygen tool.</p>
<h1>Example Programs</h1>
<h2>02-Really-Simple-Output</h2>
<div class="fragment"><div class="line">#include &quot;Particle.h&quot;</div>
<div class="line">#include &quot;MCP23008-RK.h&quot;</div>
<div class="line"> </div>
<div class="line">MCP23008 gpio(Wire, 0);</div>
<div class="line"> </div>
<div class="line">void setup() {</div>
<div class="line">    Serial.begin(9600);</div>
<div class="line"> </div>
<div class="line">    gpio.begin();</div>
<div class="line">    gpio.pinMode(0, OUTPUT);</div>
<div class="line">    gpio.digitalWrite(0, HIGH);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">void loop() {</div>
<div class="line">}</div>
</div><!-- fragment --><p>It's simple!</p>
<h2>01-simple-gpio</h2>
<p>This example outputs a square wave on pins 0 - 3:</p>
<ul>
<li>GP0: 1000 ms. period (1 Hz)</li>
<li>GP1: 666 ms. period</li>
<li>GP2: 200 ms. period (5 Hz)</li>
<li>GP3: 20 ms. period (50 Hz)</li>
</ul>
<p>This should result in the following:</p>
<div class="image">
<img src="output.png" alt=""/>
<div class="caption">
Output</div></div>
   <p>You can also connect a jumper from GP7 to one of those pins. It echoes the value on the GP7 input to the blue D7 LED on the Photon, so you can see the different frequencies.</p>
<h2>03-interrupts</h2>
<p>Uses the INT pin and a handler to be notified of changes in a GPIO on the <a class="el" href="class_m_c_p23008.html" title="Class for the MCP23008 I2C GPIO chip.">MCP23008</a> efficiently.</p>
<h2>04-interrupts-class</h2>
<p>Uses the INT pin and has a handler as a C++ class member function.</p>
<h1>Version History</h1>
<h2>0.0.4 (2021-02-01)</h2>
<ul>
<li>Added documentation</li>
</ul>
<h2>0.0.3 (2021-01-28)</h2>
<ul>
<li>Adds support for interrupt mode, to be further documented later.</li>
<li>Adds Wire lock() and unlock() for thread safety </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
