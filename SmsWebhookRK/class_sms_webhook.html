<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SmsWebhookRK: SmsWebhook Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SmsWebhookRK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">SmsWebhook Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Class for the library.  
 <a href="class_sms_webhook.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_sms_webhook_r_k_8h_source.html">SmsWebhookRK.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a76bddfbdcd5aedd029e7c64115eb948e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#a76bddfbdcd5aedd029e7c64115eb948e">setup</a> ()</td></tr>
<tr class="memdesc:a76bddfbdcd5aedd029e7c64115eb948e"><td class="mdescLeft">&#160;</td><td class="mdescRight">You must call <a class="el" href="class_sms_webhook.html#a76bddfbdcd5aedd029e7c64115eb948e" title="You must call setup() from global application setup()!">setup()</a> from global application <a class="el" href="class_sms_webhook.html#a76bddfbdcd5aedd029e7c64115eb948e" title="You must call setup() from global application setup()!">setup()</a>!  <a href="class_sms_webhook.html#a76bddfbdcd5aedd029e7c64115eb948e">More...</a><br /></td></tr>
<tr class="separator:a76bddfbdcd5aedd029e7c64115eb948e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae81962c1b0ff55cb5336ad58298620d1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#ae81962c1b0ff55cb5336ad58298620d1">loop</a> ()</td></tr>
<tr class="memdesc:ae81962c1b0ff55cb5336ad58298620d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">You must call <a class="el" href="class_sms_webhook.html#ae81962c1b0ff55cb5336ad58298620d1" title="You must call loop() from global application loop()!">loop()</a> from global application <a class="el" href="class_sms_webhook.html#ae81962c1b0ff55cb5336ad58298620d1" title="You must call loop() from global application loop()!">loop()</a>!  <a href="class_sms_webhook.html#ae81962c1b0ff55cb5336ad58298620d1">More...</a><br /></td></tr>
<tr class="separator:ae81962c1b0ff55cb5336ad58298620d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4694830021baf25d707cb6ff344763d9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#a4694830021baf25d707cb6ff344763d9">queueSms</a> (<a class="el" href="class_sms_message.html">SmsMessage</a> smsMessage)</td></tr>
<tr class="memdesc:a4694830021baf25d707cb6ff344763d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue a <a class="el" href="class_sms_message.html" title="Class for setting parameters for a SMS message.">SmsMessage</a> to send.  <a href="class_sms_webhook.html#a4694830021baf25d707cb6ff344763d9">More...</a><br /></td></tr>
<tr class="separator:a4694830021baf25d707cb6ff344763d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab295bf21bc864856088e4e6de1ef82d3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sms_webhook.html">SmsWebhook</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#ab295bf21bc864856088e4e6de1ef82d3">withEventName</a> (const char *<a class="el" href="class_sms_webhook.html#a685c30821a894c91f9745989e582d36d">eventName</a>)</td></tr>
<tr class="memdesc:ab295bf21bc864856088e4e6de1ef82d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the event name to use. This must match the webhook. Default is "SendSmsEvent".  <a href="class_sms_webhook.html#ab295bf21bc864856088e4e6de1ef82d3">More...</a><br /></td></tr>
<tr class="separator:ab295bf21bc864856088e4e6de1ef82d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8591b666867fd10502fcd782495181a9"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#a8591b666867fd10502fcd782495181a9">getEventName</a> () const</td></tr>
<tr class="memdesc:a8591b666867fd10502fcd782495181a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the previously set event name (or the default, if it hasn't been set yet)  <a href="class_sms_webhook.html#a8591b666867fd10502fcd782495181a9">More...</a><br /></td></tr>
<tr class="separator:a8591b666867fd10502fcd782495181a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a303ef010481ef81c4e52b0770ebc57c3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sms_webhook.html">SmsWebhook</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#a303ef010481ef81c4e52b0770ebc57c3">withRecipientCallback</a> (std::function&lt; bool(String &amp;phone)&gt; <a class="el" href="class_sms_webhook.html#ab7c37e613b2af7faac8c5d098befb495">recipientCallback</a>)</td></tr>
<tr class="memdesc:a303ef010481ef81c4e52b0770ebc57c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets a function to call to get the recipient if the <a class="el" href="class_sms_message.html" title="Class for setting parameters for a SMS message.">SmsMessage</a> recipient field is black.  <a href="class_sms_webhook.html#a303ef010481ef81c4e52b0770ebc57c3">More...</a><br /></td></tr>
<tr class="separator:a303ef010481ef81c4e52b0770ebc57c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5c2059e12c433efc8727c14024f13a0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sms_webhook.html">SmsWebhook</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#ac5c2059e12c433efc8727c14024f13a0">withRetryNoRecipientMs</a> (unsigned long milliseconds)</td></tr>
<tr class="memdesc:ac5c2059e12c433efc8727c14024f13a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the retry time when no recipient is specified in milliseconds. Default is 15 seconds.  <a href="class_sms_webhook.html#ac5c2059e12c433efc8727c14024f13a0">More...</a><br /></td></tr>
<tr class="separator:ac5c2059e12c433efc8727c14024f13a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d7d883133649edcc9978b304489768b"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#a1d7d883133649edcc9978b304489768b">getRetryNoRecipientMs</a> () const</td></tr>
<tr class="memdesc:a1d7d883133649edcc9978b304489768b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the previously set retry when no recipient is specified value (or the default, if it hasn't been set yet)  <a href="class_sms_webhook.html#a1d7d883133649edcc9978b304489768b">More...</a><br /></td></tr>
<tr class="separator:a1d7d883133649edcc9978b304489768b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abec6c53f57337c73aaabae8febd74ca0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sms_webhook.html">SmsWebhook</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#abec6c53f57337c73aaabae8febd74ca0">withRetryPublishFailMs</a> (unsigned long milliseconds)</td></tr>
<tr class="memdesc:abec6c53f57337c73aaabae8febd74ca0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the retry time if the publish fails. Default is 15 seconds.  <a href="class_sms_webhook.html#abec6c53f57337c73aaabae8febd74ca0">More...</a><br /></td></tr>
<tr class="separator:abec6c53f57337c73aaabae8febd74ca0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2319e1b37172ee06ab24d2fac4ccbf08"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#a2319e1b37172ee06ab24d2fac4ccbf08">getRetryPublishFailMs</a> () const</td></tr>
<tr class="memdesc:a2319e1b37172ee06ab24d2fac4ccbf08"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the previously set retry when publish fails value (or the default, if it hasn't been set yet)  <a href="class_sms_webhook.html#a2319e1b37172ee06ab24d2fac4ccbf08">More...</a><br /></td></tr>
<tr class="separator:a2319e1b37172ee06ab24d2fac4ccbf08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c261911b2d09da6decb07d5042b408a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_sms_webhook.html">SmsWebhook</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#a0c261911b2d09da6decb07d5042b408a">withPublishRateLimitMs</a> (unsigned long milliseconds)</td></tr>
<tr class="memdesc:a0c261911b2d09da6decb07d5042b408a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets publish rate limit. If multiple publishes are required, wait this long between publishes. Default is 1010 milliseconds.  <a href="class_sms_webhook.html#a0c261911b2d09da6decb07d5042b408a">More...</a><br /></td></tr>
<tr class="separator:a0c261911b2d09da6decb07d5042b408a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3701e695a99d60ee0226182dab3a2832"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#a3701e695a99d60ee0226182dab3a2832">getPublishRateLimitMs</a> () const</td></tr>
<tr class="memdesc:a3701e695a99d60ee0226182dab3a2832"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the previously set publish rate limit value (or the default, if it hasn't been set yet)  <a href="class_sms_webhook.html#a3701e695a99d60ee0226182dab3a2832">More...</a><br /></td></tr>
<tr class="separator:a3701e695a99d60ee0226182dab3a2832"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a749eb4c9932d233524aebe1054960e65"><td class="memItemLeft" align="right" valign="top"><a id="a749eb4c9932d233524aebe1054960e65"></a>
static <a class="el" href="class_sms_webhook.html">SmsWebhook</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#a749eb4c9932d233524aebe1054960e65">instance</a> ()</td></tr>
<tr class="memdesc:a749eb4c9932d233524aebe1054960e65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the singleton instance of this class. <br /></td></tr>
<tr class="separator:a749eb4c9932d233524aebe1054960e65"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a033d2ddbde08988e3e5ed586d2f61df4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#a033d2ddbde08988e3e5ed586d2f61df4">SmsWebhook</a> ()</td></tr>
<tr class="memdesc:a033d2ddbde08988e3e5ed586d2f61df4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor (protected)  <a href="class_sms_webhook.html#a033d2ddbde08988e3e5ed586d2f61df4">More...</a><br /></td></tr>
<tr class="separator:a033d2ddbde08988e3e5ed586d2f61df4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbee1b657da5dc46fa1d6b308e63bf1c"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#acbee1b657da5dc46fa1d6b308e63bf1c">~SmsWebhook</a> ()</td></tr>
<tr class="memdesc:acbee1b657da5dc46fa1d6b308e63bf1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor - never used.  <a href="class_sms_webhook.html#acbee1b657da5dc46fa1d6b308e63bf1c">More...</a><br /></td></tr>
<tr class="separator:acbee1b657da5dc46fa1d6b308e63bf1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a631e41d1a471883a2b8bb7edc1130201"><td class="memItemLeft" align="right" valign="top"><a id="a631e41d1a471883a2b8bb7edc1130201"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#a631e41d1a471883a2b8bb7edc1130201">SmsWebhook</a> (const <a class="el" href="class_sms_webhook.html">SmsWebhook</a> &amp;)=delete</td></tr>
<tr class="memdesc:a631e41d1a471883a2b8bb7edc1130201"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class is not copyable. <br /></td></tr>
<tr class="separator:a631e41d1a471883a2b8bb7edc1130201"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a561aacb1a5024c5654fe86ec0daf79"><td class="memItemLeft" align="right" valign="top"><a id="a8a561aacb1a5024c5654fe86ec0daf79"></a>
<a class="el" href="class_sms_webhook.html">SmsWebhook</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#a8a561aacb1a5024c5654fe86ec0daf79">operator=</a> (const <a class="el" href="class_sms_webhook.html">SmsWebhook</a> &amp;)=delete</td></tr>
<tr class="memdesc:a8a561aacb1a5024c5654fe86ec0daf79"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class is not copyable. <br /></td></tr>
<tr class="separator:a8a561aacb1a5024c5654fe86ec0daf79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4849478f9eaece8566c79cd30b350de6"><td class="memItemLeft" align="right" valign="top"><a id="a4849478f9eaece8566c79cd30b350de6"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#a4849478f9eaece8566c79cd30b350de6">stateWaitForMessage</a> ()</td></tr>
<tr class="memdesc:a4849478f9eaece8566c79cd30b350de6"><td class="mdescLeft">&#160;</td><td class="mdescRight">State handler for waiting for a message and cloud connected. <br /></td></tr>
<tr class="separator:a4849478f9eaece8566c79cd30b350de6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d80c6336d0c49bdbac4c3b1bbfabf8a"><td class="memItemLeft" align="right" valign="top"><a id="a6d80c6336d0c49bdbac4c3b1bbfabf8a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#a6d80c6336d0c49bdbac4c3b1bbfabf8a">stateWaitPublish</a> ()</td></tr>
<tr class="memdesc:a6d80c6336d0c49bdbac4c3b1bbfabf8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">State handler for waiting for publish to complete. <br /></td></tr>
<tr class="separator:a6d80c6336d0c49bdbac4c3b1bbfabf8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b460805171982fb81260fb0cd1c3fa5"><td class="memItemLeft" align="right" valign="top"><a id="a6b460805171982fb81260fb0cd1c3fa5"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#a6b460805171982fb81260fb0cd1c3fa5">stateWaitRetry</a> ()</td></tr>
<tr class="memdesc:a6b460805171982fb81260fb0cd1c3fa5"><td class="mdescLeft">&#160;</td><td class="mdescRight">State handler for waiting for to retry. <br /></td></tr>
<tr class="separator:a6b460805171982fb81260fb0cd1c3fa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a685c30821a894c91f9745989e582d36d"><td class="memItemLeft" align="right" valign="top"><a id="a685c30821a894c91f9745989e582d36d"></a>
String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#a685c30821a894c91f9745989e582d36d">eventName</a> = &quot;SendSmsEvent&quot;</td></tr>
<tr class="memdesc:a685c30821a894c91f9745989e582d36d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Event name to use. Default is "SendSmsEvent". Use <a class="el" href="class_sms_webhook.html#ab295bf21bc864856088e4e6de1ef82d3" title="Sets the event name to use. This must match the webhook. Default is &quot;SendSmsEvent&quot;.">withEventName()</a> to change. <br /></td></tr>
<tr class="separator:a685c30821a894c91f9745989e582d36d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7c37e613b2af7faac8c5d098befb495"><td class="memItemLeft" align="right" valign="top"><a id="ab7c37e613b2af7faac8c5d098befb495"></a>
std::function&lt; bool(String &amp;)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#ab7c37e613b2af7faac8c5d098befb495">recipientCallback</a> = 0</td></tr>
<tr class="memdesc:ab7c37e613b2af7faac8c5d098befb495"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recipient callbac. Use <a class="el" href="class_sms_webhook.html#a303ef010481ef81c4e52b0770ebc57c3" title="Sets a function to call to get the recipient if the SmsMessage recipient field is black.">withRecipientCallback()</a> to change. Default: none. <br /></td></tr>
<tr class="separator:ab7c37e613b2af7faac8c5d098befb495"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab80401cb9830b1164b24c14257a8f127"><td class="memItemLeft" align="right" valign="top"><a id="ab80401cb9830b1164b24c14257a8f127"></a>
os_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#ab80401cb9830b1164b24c14257a8f127">sendQueueMutex</a> = 0</td></tr>
<tr class="memdesc:ab80401cb9830b1164b24c14257a8f127"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mutex to protect sendQueue from access from multiple threads simultaneously. <br /></td></tr>
<tr class="separator:ab80401cb9830b1164b24c14257a8f127"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae766fd5a871a78fbb3b1fe14618bf197"><td class="memItemLeft" align="right" valign="top">std::deque&lt; <a class="el" href="class_sms_message.html">SmsMessage</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#ae766fd5a871a78fbb3b1fe14618bf197">sendQueue</a></td></tr>
<tr class="memdesc:ae766fd5a871a78fbb3b1fe14618bf197"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue of <a class="el" href="class_sms_message.html" title="Class for setting parameters for a SMS message.">SmsMessage</a> objects to send.  <a href="class_sms_webhook.html#ae766fd5a871a78fbb3b1fe14618bf197">More...</a><br /></td></tr>
<tr class="separator:ae766fd5a871a78fbb3b1fe14618bf197"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83bed992000aac73ab028a9f96ef3dfe"><td class="memItemLeft" align="right" valign="top">particle::Future&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#a83bed992000aac73ab028a9f96ef3dfe">publishFuture</a></td></tr>
<tr class="memdesc:a83bed992000aac73ab028a9f96ef3dfe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Future used to monitor the state of <code>Particle.publish()</code>.  <a href="class_sms_webhook.html#a83bed992000aac73ab028a9f96ef3dfe">More...</a><br /></td></tr>
<tr class="separator:a83bed992000aac73ab028a9f96ef3dfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab870da0036e7eb3c368875b1ac6d20f1"><td class="memItemLeft" align="right" valign="top"><a id="ab870da0036e7eb3c368875b1ac6d20f1"></a>
unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#ab870da0036e7eb3c368875b1ac6d20f1">stateTime</a> = 0</td></tr>
<tr class="memdesc:ab870da0036e7eb3c368875b1ac6d20f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">millis() value used for various timing purposes. This is always the start time. <br /></td></tr>
<tr class="separator:ab870da0036e7eb3c368875b1ac6d20f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a124fa28fba021e5751469f487dc2c533"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#a124fa28fba021e5751469f487dc2c533">retryTimeMs</a> = 0</td></tr>
<tr class="memdesc:a124fa28fba021e5751469f487dc2c533"><td class="mdescLeft">&#160;</td><td class="mdescRight">How long to wait for retry in stateWaitRetry.  <a href="class_sms_webhook.html#a124fa28fba021e5751469f487dc2c533">More...</a><br /></td></tr>
<tr class="separator:a124fa28fba021e5751469f487dc2c533"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a371d24df775a4eeb985f2cd04acb3ded"><td class="memItemLeft" align="right" valign="top"><a id="a371d24df775a4eeb985f2cd04acb3ded"></a>
unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#a371d24df775a4eeb985f2cd04acb3ded">retryNoRecipientMs</a> = 15000</td></tr>
<tr class="memdesc:a371d24df775a4eeb985f2cd04acb3ded"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retry time when no recipient is specified in milliseconds. Default is 15 seconds. <br /></td></tr>
<tr class="separator:a371d24df775a4eeb985f2cd04acb3ded"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4db8188298b0d1f0c8c0f69ccdb00ea5"><td class="memItemLeft" align="right" valign="top"><a id="a4db8188298b0d1f0c8c0f69ccdb00ea5"></a>
unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#a4db8188298b0d1f0c8c0f69ccdb00ea5">retryPublishFailMs</a> = 15000</td></tr>
<tr class="memdesc:a4db8188298b0d1f0c8c0f69ccdb00ea5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retry time when no if publish fails in milliseconds. <br /></td></tr>
<tr class="separator:a4db8188298b0d1f0c8c0f69ccdb00ea5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b36bbf9f0009cc860bcc469073d3902"><td class="memItemLeft" align="right" valign="top"><a id="a9b36bbf9f0009cc860bcc469073d3902"></a>
unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#a9b36bbf9f0009cc860bcc469073d3902">publishRateLimitMs</a> = 1010</td></tr>
<tr class="memdesc:a9b36bbf9f0009cc860bcc469073d3902"><td class="mdescLeft">&#160;</td><td class="mdescRight">publish rate limit. If multiple publishes are required, wait this long between publishes. <br /></td></tr>
<tr class="separator:a9b36bbf9f0009cc860bcc469073d3902"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8219c0fb530a95770492280f9a549c0"><td class="memItemLeft" align="right" valign="top">std::function&lt; void(<a class="el" href="class_sms_webhook.html">SmsWebhook</a> &amp;)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#ae8219c0fb530a95770492280f9a549c0">stateHandler</a> = 0</td></tr>
<tr class="memdesc:ae8219c0fb530a95770492280f9a549c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">State handler for the main state machine.  <a href="class_sms_webhook.html#ae8219c0fb530a95770492280f9a549c0">More...</a><br /></td></tr>
<tr class="separator:ae8219c0fb530a95770492280f9a549c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:a4eded9085f0aa29a378f80eaec8e5461"><td class="memItemLeft" align="right" valign="top">static const size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#a4eded9085f0aa29a378f80eaec8e5461">JSON_BUF_SIZE</a> = 256</td></tr>
<tr class="memdesc:a4eded9085f0aa29a378f80eaec8e5461"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the temporary buffer for the JSON data for the publish.  <a href="class_sms_webhook.html#a4eded9085f0aa29a378f80eaec8e5461">More...</a><br /></td></tr>
<tr class="separator:a4eded9085f0aa29a378f80eaec8e5461"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a642cd63d103326786886acd3d63abf43"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_sms_webhook.html">SmsWebhook</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sms_webhook.html#a642cd63d103326786886acd3d63abf43">_instance</a></td></tr>
<tr class="memdesc:a642cd63d103326786886acd3d63abf43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Singleton instance of this class.  <a href="class_sms_webhook.html#a642cd63d103326786886acd3d63abf43">More...</a><br /></td></tr>
<tr class="separator:a642cd63d103326786886acd3d63abf43"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class for the library. </p>
<p>It's a singleton, so you always access it using <code><a class="el" href="class_sms_webhook.html#a749eb4c9932d233524aebe1054960e65" title="Get the singleton instance of this class.">SmsWebhook::instance()</a></code>. You never allocate one as a global variable, stack variable, or with <code>new</code>.</p>
<p>You must call <code><a class="el" href="class_sms_webhook.html#a749eb4c9932d233524aebe1054960e65" title="Get the singleton instance of this class.">SmsWebhook::instance()</a>.<a class="el" href="class_sms_webhook.html#a76bddfbdcd5aedd029e7c64115eb948e" title="You must call setup() from global application setup()!">setup()</a></code> from your global application <code><a class="el" href="class_sms_webhook.html#a76bddfbdcd5aedd029e7c64115eb948e" title="You must call setup() from global application setup()!">setup()</a></code>.</p>
<p>You must call <code><a class="el" href="class_sms_webhook.html#a749eb4c9932d233524aebe1054960e65" title="Get the singleton instance of this class.">SmsWebhook::instance()</a>.<a class="el" href="class_sms_webhook.html#ae81962c1b0ff55cb5336ad58298620d1" title="You must call loop() from global application loop()!">loop()</a></code> from your global application <code><a class="el" href="class_sms_webhook.html#ae81962c1b0ff55cb5336ad58298620d1" title="You must call loop() from global application loop()!">loop()</a></code>. Failure to do so will cause no messages to ever be sent.</p>
<p>To queue a message to be sent, use <code><a class="el" href="class_sms_webhook.html#a749eb4c9932d233524aebe1054960e65" title="Get the singleton instance of this class.">SmsWebhook::instance()</a>.queueSms(mesg)</code>. If the device is connected to the Particle cloud, it will go out almost immediately. If an error occurs, it will retry later. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a033d2ddbde08988e3e5ed586d2f61df4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a033d2ddbde08988e3e5ed586d2f61df4">&#9670;&nbsp;</a></span>SmsWebhook()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">SmsWebhook::SmsWebhook </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor (protected) </p>
<p>You never construct one of these - use the singleton instance using <code><a class="el" href="class_sms_webhook.html#a749eb4c9932d233524aebe1054960e65" title="Get the singleton instance of this class.">SmsWebhook::instance()</a></code>. </p>

</div>
</div>
<a id="acbee1b657da5dc46fa1d6b308e63bf1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbee1b657da5dc46fa1d6b308e63bf1c">&#9670;&nbsp;</a></span>~SmsWebhook()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">SmsWebhook::~SmsWebhook </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor - never used. </p>
<p>The singleton cannot be deleted. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a8591b666867fd10502fcd782495181a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8591b666867fd10502fcd782495181a9">&#9670;&nbsp;</a></span>getEventName()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* SmsWebhook::getEventName </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the previously set event name (or the default, if it hasn't been set yet) </p>
<dl class="section return"><dt>Returns</dt><dd>A c-string (null terminated) </dd></dl>

</div>
</div>
<a id="a3701e695a99d60ee0226182dab3a2832"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3701e695a99d60ee0226182dab3a2832">&#9670;&nbsp;</a></span>getPublishRateLimitMs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long SmsWebhook::getPublishRateLimitMs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the previously set publish rate limit value (or the default, if it hasn't been set yet) </p>
<dl class="section return"><dt>Returns</dt><dd>An unsigned long value of milliseconds. </dd></dl>

</div>
</div>
<a id="a1d7d883133649edcc9978b304489768b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d7d883133649edcc9978b304489768b">&#9670;&nbsp;</a></span>getRetryNoRecipientMs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long SmsWebhook::getRetryNoRecipientMs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the previously set retry when no recipient is specified value (or the default, if it hasn't been set yet) </p>
<dl class="section return"><dt>Returns</dt><dd>An unsigned long value of milliseconds. </dd></dl>

</div>
</div>
<a id="a2319e1b37172ee06ab24d2fac4ccbf08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2319e1b37172ee06ab24d2fac4ccbf08">&#9670;&nbsp;</a></span>getRetryPublishFailMs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long SmsWebhook::getRetryPublishFailMs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the previously set retry when publish fails value (or the default, if it hasn't been set yet) </p>
<dl class="section return"><dt>Returns</dt><dd>An unsigned long value of milliseconds. </dd></dl>

</div>
</div>
<a id="ae81962c1b0ff55cb5336ad58298620d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae81962c1b0ff55cb5336ad58298620d1">&#9670;&nbsp;</a></span>loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SmsWebhook::loop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>You must call <a class="el" href="class_sms_webhook.html#ae81962c1b0ff55cb5336ad58298620d1" title="You must call loop() from global application loop()!">loop()</a> from global application <a class="el" href="class_sms_webhook.html#ae81962c1b0ff55cb5336ad58298620d1" title="You must call loop() from global application loop()!">loop()</a>! </p>
<p>It's normally done like:</p>
<div class="fragment"><div class="line"><a class="code" href="class_sms_webhook.html#a749eb4c9932d233524aebe1054960e65">SmsWebhook::instance</a>().<a class="code" href="class_sms_webhook.html#ae81962c1b0ff55cb5336ad58298620d1">loop</a>();</div>
</div><!-- fragment --><p>Failure to call loop will prevent the library from sending messages. </p>

</div>
</div>
<a id="a4694830021baf25d707cb6ff344763d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4694830021baf25d707cb6ff344763d9">&#9670;&nbsp;</a></span>queueSms()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SmsWebhook::queueSms </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_sms_message.html">SmsMessage</a>&#160;</td>
          <td class="paramname"><em>smsMessage</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Queue a <a class="el" href="class_sms_message.html" title="Class for setting parameters for a SMS message.">SmsMessage</a> to send. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">smsMessage</td><td>Information about the message to be sent, typically containing a recipient phone number and the message content.</td></tr>
  </table>
  </dd>
</dl>
<p>The smsMessage object is copied by this call. It's safe to make this call from other threads. It cannot be made at ISR time as it does memory allocation. </p>

</div>
</div>
<a id="a76bddfbdcd5aedd029e7c64115eb948e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76bddfbdcd5aedd029e7c64115eb948e">&#9670;&nbsp;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SmsWebhook::setup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>You must call <a class="el" href="class_sms_webhook.html#a76bddfbdcd5aedd029e7c64115eb948e" title="You must call setup() from global application setup()!">setup()</a> from global application <a class="el" href="class_sms_webhook.html#a76bddfbdcd5aedd029e7c64115eb948e" title="You must call setup() from global application setup()!">setup()</a>! </p>
<p>It's normally done like:</p>
<div class="fragment"><div class="line"><a class="code" href="class_sms_webhook.html#a749eb4c9932d233524aebe1054960e65">SmsWebhook::instance</a>().<a class="code" href="class_sms_webhook.html#a76bddfbdcd5aedd029e7c64115eb948e">setup</a>();</div>
</div><!-- fragment --><p>Failure to call setup will prevent the library from doing anything. </p>

</div>
</div>
<a id="ab295bf21bc864856088e4e6de1ef82d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab295bf21bc864856088e4e6de1ef82d3">&#9670;&nbsp;</a></span>withEventName()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sms_webhook.html">SmsWebhook</a>&amp; SmsWebhook::withEventName </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>eventName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the event name to use. This must match the webhook. Default is "SendSmsEvent". </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">eventName</td><td>the event name to use</td></tr>
  </table>
  </dd>
</dl>
<p>Event naming rules: 1 - 64 ASCII characters; only use letters, numbers, underscores, dashes and slashes. Spaces and special characters should not be used). Also note that the event name is a prefix, so any event name beginning with that string will trigger the webhook. </p>

</div>
</div>
<a id="a0c261911b2d09da6decb07d5042b408a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c261911b2d09da6decb07d5042b408a">&#9670;&nbsp;</a></span>withPublishRateLimitMs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sms_webhook.html">SmsWebhook</a>&amp; SmsWebhook::withPublishRateLimitMs </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>milliseconds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets publish rate limit. If multiple publishes are required, wait this long between publishes. Default is 1010 milliseconds. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">milliseconds</td><td>New value in milliseconds</td></tr>
  </table>
  </dd>
</dl>
<p>In addition to the Particle publish rate limit, you could also hit a rate limit at Twilio if you need to send a lot of SMS messages. </p>

</div>
</div>
<a id="a303ef010481ef81c4e52b0770ebc57c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a303ef010481ef81c4e52b0770ebc57c3">&#9670;&nbsp;</a></span>withRecipientCallback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sms_webhook.html">SmsWebhook</a>&amp; SmsWebhook::withRecipientCallback </td>
          <td>(</td>
          <td class="paramtype">std::function&lt; bool(String &amp;phone)&gt;&#160;</td>
          <td class="paramname"><em>recipientCallback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets a function to call to get the recipient if the <a class="el" href="class_sms_message.html" title="Class for setting parameters for a SMS message.">SmsMessage</a> recipient field is black. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">recipientCallback</td><td>the function to call to find the recipient</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>*this, so you can chain this function fluent-style.</dd></dl>
<p>The recipientCallback has this prototype:</p>
<p>bool recipientCallback(String &amp;phone);</p>
<p>The callback returns true if the recipient is know, or false if not. The if false is returned, then an attempt will be made again after the timeout.</p>
<p>The phone number must begin with "+" and the country code, so, for example in the US: +15558675310 . </p>

</div>
</div>
<a id="ac5c2059e12c433efc8727c14024f13a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5c2059e12c433efc8727c14024f13a0">&#9670;&nbsp;</a></span>withRetryNoRecipientMs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sms_webhook.html">SmsWebhook</a>&amp; SmsWebhook::withRetryNoRecipientMs </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>milliseconds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the retry time when no recipient is specified in milliseconds. Default is 15 seconds. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">milliseconds</td><td>New value in milliseconds</td></tr>
  </table>
  </dd>
</dl>
<p>If the recipient is not specified in the <code><a class="el" href="class_sms_message.html" title="Class for setting parameters for a SMS message.">SmsMessage</a></code> object, then the recipient callback is used. If the recipient callback returns false (not known yet), the message is left in the queue. This is common if the recipient SMS is sent from the cloud (Particle function, device notes, or Google sheets). This parameter determines how long to wait before checking again. </p>

</div>
</div>
<a id="abec6c53f57337c73aaabae8febd74ca0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abec6c53f57337c73aaabae8febd74ca0">&#9670;&nbsp;</a></span>withRetryPublishFailMs()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sms_webhook.html">SmsWebhook</a>&amp; SmsWebhook::withRetryPublishFailMs </td>
          <td>(</td>
          <td class="paramtype">unsigned long&#160;</td>
          <td class="paramname"><em>milliseconds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the retry time if the publish fails. Default is 15 seconds. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">milliseconds</td><td>New value in milliseconds</td></tr>
  </table>
  </dd>
</dl>
<p>If <code>Particle.publish()</code> fails, this is how long to wait before retrying. Note that if the webhook fails this is not consulted, but does take care of the situation where you have poor connectivity and the publish is not able to be sent. </p>

</div>
</div>
<h2 class="groupheader">Field Documentation</h2>
<a id="a642cd63d103326786886acd3d63abf43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a642cd63d103326786886acd3d63abf43">&#9670;&nbsp;</a></span>_instance</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_sms_webhook.html">SmsWebhook</a> * SmsWebhook::_instance</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Singleton instance of this class. </p>
<p>Use <a class="el" href="class_sms_webhook.html#a749eb4c9932d233524aebe1054960e65" title="Get the singleton instance of this class.">instance()</a> to obtain this, dereferenced. </p>

</div>
</div>
<a id="a4eded9085f0aa29a378f80eaec8e5461"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4eded9085f0aa29a378f80eaec8e5461">&#9670;&nbsp;</a></span>JSON_BUF_SIZE</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const size_t SmsWebhook::JSON_BUF_SIZE = 256</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the temporary buffer for the JSON data for the publish. </p>
<p>This is allocated on the stack, but is only done from <a class="el" href="class_sms_webhook.html#ae81962c1b0ff55cb5336ad58298620d1" title="You must call loop() from global application loop()!">loop()</a> which as a 6K stack. It doesn't make sense for this to be larger than the maximum publish size (622 bytes). Currently the only thing in it is the message and recipient, which probably fit in 160-ish bytes but 256 leaves a little extra room just in case. </p>

</div>
</div>
<a id="a83bed992000aac73ab028a9f96ef3dfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83bed992000aac73ab028a9f96ef3dfe">&#9670;&nbsp;</a></span>publishFuture</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">particle::Future&lt;bool&gt; SmsWebhook::publishFuture</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Future used to monitor the state of <code>Particle.publish()</code>. </p>
<p>The publish call uses a future so it does not block loop until completion. </p>

</div>
</div>
<a id="a124fa28fba021e5751469f487dc2c533"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a124fa28fba021e5751469f487dc2c533">&#9670;&nbsp;</a></span>retryTimeMs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long SmsWebhook::retryTimeMs = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>How long to wait for retry in stateWaitRetry. </p>
<p>This is compared to stateTime in a way that works across millis() rollover every 49 days. </p>

</div>
</div>
<a id="ae766fd5a871a78fbb3b1fe14618bf197"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae766fd5a871a78fbb3b1fe14618bf197">&#9670;&nbsp;</a></span>sendQueue</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::deque&lt;<a class="el" href="class_sms_message.html">SmsMessage</a>&gt; SmsWebhook::sendQueue</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Queue of <a class="el" href="class_sms_message.html" title="Class for setting parameters for a SMS message.">SmsMessage</a> objects to send. </p>
<p>Objects are enqueued using <a class="el" href="class_sms_webhook.html#a4694830021baf25d707cb6ff344763d9" title="Queue a SmsMessage to send.">queueSms()</a> and removed from the state handlers called from <a class="el" href="class_sms_webhook.html#ae81962c1b0ff55cb5336ad58298620d1" title="You must call loop() from global application loop()!">loop()</a>. </p>

</div>
</div>
<a id="ae8219c0fb530a95770492280f9a549c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8219c0fb530a95770492280f9a549c0">&#9670;&nbsp;</a></span>stateHandler</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::function&lt;void(<a class="el" href="class_sms_webhook.html">SmsWebhook</a> &amp;)&gt; SmsWebhook::stateHandler = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>State handler for the main state machine. </p>
<p>The state handler are class method with the prototype:</p>
<p>void stateHandlerMethod(); </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="_sms_webhook_r_k_8h_source.html">SmsWebhookRK.h</a></li>
<li>src/SmsWebhookRK.cpp</li>
</ul>
</div><!-- contents -->
<div class="ttc" id="aclass_sms_webhook_html_ae81962c1b0ff55cb5336ad58298620d1"><div class="ttname"><a href="class_sms_webhook.html#ae81962c1b0ff55cb5336ad58298620d1">SmsWebhook::loop</a></div><div class="ttdeci">void loop()</div><div class="ttdoc">You must call loop() from global application loop()!</div><div class="ttdef"><b>Definition:</b> SmsWebhookRK.cpp:21</div></div>
<div class="ttc" id="aclass_sms_webhook_html_a76bddfbdcd5aedd029e7c64115eb948e"><div class="ttname"><a href="class_sms_webhook.html#a76bddfbdcd5aedd029e7c64115eb948e">SmsWebhook::setup</a></div><div class="ttdeci">void setup()</div><div class="ttdoc">You must call setup() from global application setup()!</div><div class="ttdef"><b>Definition:</b> SmsWebhookRK.cpp:16</div></div>
<div class="ttc" id="aclass_sms_webhook_html_a749eb4c9932d233524aebe1054960e65"><div class="ttname"><a href="class_sms_webhook.html#a749eb4c9932d233524aebe1054960e65">SmsWebhook::instance</a></div><div class="ttdeci">static SmsWebhook &amp; instance()</div><div class="ttdoc">Get the singleton instance of this class.</div><div class="ttdef"><b>Definition:</b> SmsWebhookRK.cpp:9</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
